{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import\"./ImageQueue.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ImageQueue(){const[images,setImages]=useState([]);const[loading,setLoading]=useState(true);const[selectedImage,setSelectedImage]=useState(null);const[showModal,setShowModal]=useState(false);// สำหรับ Preview และ Queue System\nconst[currentPreview,setCurrentPreview]=useState(null);const[previewQueue,setPreviewQueue]=useState([]);const[timeLeft,setTimeLeft]=useState(0);const[isActive,setIsActive]=useState(false);const[isPaused,setIsPaused]=useState(false);const[pauseTimeLeft,setPauseTimeLeft]=useState(0);useEffect(()=>{fetchImages();const interval=setInterval(fetchImages,5000);return()=>clearInterval(interval);},[]);// เมื่อเริ่มแสดงรูปใหม่ (ใน processNextInQueue หรือ handleApprove)\nconst startPreview=image=>{const now=Date.now();setCurrentPreview(image);setTimeLeft(image.time*60);setIsActive(true);localStorage.setItem(\"currentPreview\",JSON.stringify(image));localStorage.setItem(\"startTimestamp\",now);localStorage.setItem(\"duration\",image.time*60);localStorage.setItem(\"isActive\",true);};// Timer effect สำหรับ countdown\nuseEffect(()=>{let interval=null;if(isActive&&currentPreview){interval=setInterval(()=>{const startTimestamp=Number(localStorage.getItem(\"startTimestamp\"));const duration=Number(localStorage.getItem(\"duration\"));const now=Date.now();const elapsed=Math.floor((now-startTimestamp)/1000);const left=duration-elapsed;setTimeLeft(left>0?left:0);if(left<=0){setIsActive(false);setCurrentPreview(null);localStorage.removeItem(\"currentPreview\");localStorage.removeItem(\"startTimestamp\");localStorage.removeItem(\"duration\");localStorage.removeItem(\"isActive\");if(previewQueue.length>0){setIsPaused(true);setPauseTimeLeft(15);}else{fetchImages();}}},1000);}return()=>clearInterval(interval);},[isActive,currentPreview,previewQueue.length]);const fetchImages=async()=>{try{const response=await fetch(\"http://localhost:5001/api/queue\");if(response.ok){const data=await response.json();setImages(data);}}catch(error){console.error(\"Error fetching images:\",error);}finally{setLoading(false);}};const handleImageClick=image=>{setSelectedImage(image);setShowModal(true);};const handleApprove=async id=>{try{const response=await fetch(`http://localhost:5001/api/approve/${id}`,{method:\"POST\"});if(response.ok){const imageToApprove=selectedImage;if(!currentPreview){startPreview(imageToApprove);}else{setPreviewQueue(prev=>[...prev,imageToApprove]);}setShowModal(false);fetchImages();}}catch(error){console.error(\"Error approving image:\",error);}};const handleReject=async id=>{try{const response=await fetch(`http://localhost:5001/api/reject/${id}`,{method:\"POST\"});if(response.ok){fetchImages();setShowModal(false);}}catch(error){console.error(\"Error rejecting image:\",error);}};const formatDate=dateString=>{return new Date(dateString).toLocaleString('th-TH',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});};const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return`${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;};// เพิ่ม useEffect สำหรับ restore state\nuseEffect(()=>{const savedPreview=localStorage.getItem(\"currentPreview\");const savedIsActive=localStorage.getItem(\"isActive\");const startTimestamp=Number(localStorage.getItem(\"startTimestamp\"));const duration=Number(localStorage.getItem(\"duration\"));if(savedPreview&&savedIsActive===\"true\"&&startTimestamp&&duration){const now=Date.now();const elapsed=Math.floor((now-startTimestamp)/1000);const left=duration-elapsed;if(left>0){setCurrentPreview(JSON.parse(savedPreview));setTimeLeft(left);setIsActive(true);}else{setCurrentPreview(null);setIsActive(false);localStorage.removeItem(\"currentPreview\");localStorage.removeItem(\"startTimestamp\");localStorage.removeItem(\"duration\");localStorage.removeItem(\"isActive\");}}},[]);// ทุกครั้งที่ state เปลี่ยน ให้ sync ลง localStorage\nuseEffect(()=>{if(currentPreview&&isActive){localStorage.setItem(\"currentPreview\",JSON.stringify(currentPreview));localStorage.setItem(\"timeLeft\",timeLeft);localStorage.setItem(\"isActive\",isActive);localStorage.setItem(\"isPaused\",isPaused);localStorage.setItem(\"pauseTimeLeft\",pauseTimeLeft);}else{// ถ้าไม่มี preview แล้ว ให้ลบออก\nlocalStorage.removeItem(\"currentPreview\");localStorage.removeItem(\"timeLeft\");localStorage.removeItem(\"isActive\");localStorage.removeItem(\"isPaused\");localStorage.removeItem(\"pauseTimeLeft\");}},[currentPreview,timeLeft,isActive,isPaused,pauseTimeLeft]);function renderSocialOnImage(socialType,socialName){switch(socialType){case\"ig\":return/*#__PURE__*/_jsxs(\"span\",{style:{display:\"inline-flex\",alignItems:\"center\",gap:4},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"2\",width:\"20\",height:\"20\",rx:\"5\",fill:\"#E1306C\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"5\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"18\",cy:\"6\",r:\"1.5\",fill:\"#fff\"})]}),socialName]});case\"fb\":return/*#__PURE__*/_jsxs(\"span\",{style:{display:\"inline-flex\",alignItems:\"center\",gap:4},children:[/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"#1877F3\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"})}),socialName]});case\"line\":return/*#__PURE__*/_jsxs(\"span\",{style:{display:\"inline-flex\",alignItems:\"center\",gap:4},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"#06C755\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"2\",width:\"20\",height:\"20\",rx:\"5\"}),/*#__PURE__*/_jsx(\"text\",{x:\"12\",y:\"16\",textAnchor:\"middle\",fontSize:\"10\",fill:\"#fff\",fontFamily:\"Arial\",children:\"LINE\"})]}),socialName]});case\"tiktok\":return/*#__PURE__*/_jsxs(\"span\",{style:{display:\"inline-flex\",alignItems:\"center\",gap:4},children:[/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"#000\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.5 3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1.5a5.5 5.5 0 0 0 5.5 5.5h1.5a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1.5A5.5 5.5 0 0 0 14.5 19.5V21a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-1.5A5.5 5.5 0 0 0 3 14.5V13a1 1 0 0 1 1-1h1.5A5.5 5.5 0 0 0 9.5 4.5V3z\"})}),socialName]});default:return null;}}function renderGiftOrder(item){const gift=item.giftOrder||{};return/*#__PURE__*/_jsxs(\"div\",{className:\"gift-order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gift-order-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"gift-table\",children:[\"\\u0E42\\u0E15\\u0E4A\\u0E30 #\",gift.tableNumber||\"-\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"gift-sender\",children:[\"\\u0E08\\u0E32\\u0E01: \",item.sender]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"gift-total\",children:[\"\\u0E3F\",item.price]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"gift-items\",children:(gift.items||[]).map(giftItem=>/*#__PURE__*/_jsxs(\"li\",{children:[giftItem.name,\" x\",giftItem.quantity]},`${item.id}-${giftItem.id}`))}),gift.note&&/*#__PURE__*/_jsxs(\"p\",{className:\"gift-note\",children:[\"\\\"\",gift.note,\"\\\"\"]})]});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"queue-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"queue-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"queue-header\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/home\",className:\"back-button\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 12H5M12 19l-7-7 7-7\"})}),\"\\u0E01\\u0E25\\u0E31\\u0E1A\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E15\\u0E23\\u0E27\\u0E08\\u0E2A\\u0E2D\\u0E1A\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-stats\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"queue-count\",children:images.length}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchImages,className:\"refresh-button\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M23 4v6h-6M1 20v-6h6M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\"})})})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"queue-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"queue-content\",children:images.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"64\",height:\"64\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"1\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"3\",y:\"3\",width:\"18\",height:\"18\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"8.5\",cy:\"8.5\",r:\"1.5\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 15l-5-5L5 21\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E2A\\u0E48\\u0E07\\u0E21\\u0E32\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"images-grid\",children:images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"image-card\",onClick:()=>handleImageClick(image),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"queue-number\",children:[\"#\",index+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"sender\",children:image.sender})]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-preview-container\",style:{position:\"relative\"},children:image.type===\"gift\"?renderGiftOrder(image):image.filePath?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${image.filePath}`,alt:\"Preview\",className:\"preview-image\"}),!image.composed&&image.socialType&&image.socialName&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-social-overlay\",children:renderSocialOnImage(image.socialType,image.socialName)}),!image.composed&&image.text&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-text-overlay\",style:{color:image.textColor},children:image.text})]}):/*#__PURE__*/// กรณีข้อความล้วนเหมือนเดิม\n_jsxs(\"div\",{className:\"text-only-card\",style:{background:\"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",borderRadius:\"18px\",minHeight:\"120px\",minWidth:\"100%\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"0 auto\",boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",padding:\"24px 0\"},children:[image.socialType&&image.socialName&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"16px\",marginTop:\"8px\",color:\"#fff\",fontWeight:\"bold\",fontSize:\"24px\",maxWidth:\"100%\",wordBreak:\"break-all\",display:\"inline-flex\",alignItems:\"center\"},children:renderSocialOnImage(image.socialType,image.socialName)}),/*#__PURE__*/_jsx(\"div\",{style:{color:image.textColor||\"#fff\",fontWeight:\"bold\",fontSize:\"20px\",textShadow:image.textColor===\"white\"?\"0 2px 8px rgba(0,0,0,0.8)\":\"0 2px 8px rgba(255,255,255,0.8)\",textAlign:\"center\",wordBreak:\"break-all\"},children:image.text})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"time\",children:[image.time,\"\\u0E19\\u0E32\\u0E17\\u0E35\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"\\u0E3F\",image.price]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:formatDate(image.receivedAt)})]})]},image.id))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E41\\u0E2A\\u0E14\\u0E07\"}),currentPreview?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-image-container\",style:{position:\"relative\"},children:currentPreview.type===\"gift\"?renderGiftOrder(currentPreview):currentPreview.filePath?/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${currentPreview.filePath}`,alt:\"Preview\",className:\"preview-image\",onError:e=>{e.target.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y5ZmFmYiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0cHgiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5No Image</text></svg>';}}):/*#__PURE__*/// กรณีไม่มีรูป (ฟังก์ชันส่งข้อความ)\n_jsxs(\"div\",{style:{background:\"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",borderRadius:\"18px\",minHeight:\"120px\",minWidth:\"100%\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"0 auto\",boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",padding:\"24px 0\"},children:[currentPreview.socialType&&currentPreview.socialName&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"16px\",marginTop:\"8px\",color:\"#fff\",fontWeight:\"bold\",fontSize:\"24px\",maxWidth:\"100%\",wordBreak:\"break-all\",display:\"inline-flex\",alignItems:\"center\"},children:renderSocialOnImage(currentPreview.socialType,currentPreview.socialName)}),/*#__PURE__*/_jsx(\"div\",{style:{color:currentPreview.textColor||\"#fff\",fontWeight:\"bold\",fontSize:\"20px\",textShadow:currentPreview.textColor===\"white\"?\"0 2px 8px rgba(0,0,0,0.8)\":\"0 2px 8px rgba(255,255,255,0.8)\",textAlign:\"center\",wordBreak:\"break-all\"},children:currentPreview.text})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"countdown-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"countdown-label\",children:isPaused?\"หน่วงเวลาระหว่างรูป:\":\"เวลาที่เหลือ:\"}),/*#__PURE__*/_jsx(\"div\",{className:`countdown-timer ${timeLeft<=10&&!isPaused||pauseTimeLeft<=5&&isPaused?'warning':''}`,children:isPaused?formatTime(pauseTimeLeft):formatTime(timeLeft)}),timeLeft===0&&!isPaused&&/*#__PURE__*/_jsx(\"div\",{className:\"time-up-message\",children:\"\\u0E2B\\u0E21\\u0E14\\u0E40\\u0E27\\u0E25\\u0E32\\u0E41\\u0E25\\u0E49\\u0E27!\"}),isPaused&&/*#__PURE__*/_jsx(\"div\",{className:\"pause-message\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E40\\u0E1B\\u0E25\\u0E35\\u0E48\\u0E22\\u0E19\\u0E23\\u0E39\\u0E1B...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u0E04\\u0E34\\u0E27:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E41\\u0E2A\\u0E14\\u0E07\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E01\\u0E32\\u0E23\\u0E41\\u0E2A\\u0E14\\u0E07:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"info-value\",children:[currentPreview.time,\" \\u0E19\\u0E32\\u0E17\\u0E35\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u0E41\\u0E2D\\u0E1B\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:currentPreview.text||'ไม่มี'})]})]}),!isPaused&&/*#__PURE__*/_jsxs(\"div\",{className:\"progress-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${(currentPreview.time*60-timeLeft)/(currentPreview.time*60)*100}%`}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-text\",children:[Math.round((currentPreview.time*60-timeLeft)/(currentPreview.time*60)*100),\"% \\u0E40\\u0E2A\\u0E23\\u0E47\\u0E08\\u0E2A\\u0E34\\u0E49\\u0E19\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-preview\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"64\",height:\"64\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"1\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"3\",y:\"3\",width:\"18\",height:\"18\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"8.5\",cy:\"8.5\",r:\"1.5\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 15l-5-5L5 21\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0E01\\u0E14\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E41\\u0E2A\\u0E14\\u0E07 Preview\"})]}),previewQueue.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"waiting-queue\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u0E04\\u0E34\\u0E27\\u0E17\\u0E35\\u0E48\\u0E23\\u0E2D\\u0E2D\\u0E22\\u0E39\\u0E48 (\",previewQueue.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-list\",children:previewQueue.map((queueImage,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-item-number\",children:[\"#\",index+1]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${queueImage.filePath}`,alt:\"Queue preview\",onError:e=>{e.target.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjZjlmYWZiIi8+PC9zdmc+';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-item-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-item-time\",children:[queueImage.time,\"\\u0E19\\u0E32\\u0E17\\u0E35\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-item-text\",children:queueImage.text?queueImage.text.slice(0,15)+'...':'ไม่มีข้อความ'})]})]},`queue-${index}`))})]})]})})]}),showModal&&selectedImage&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\",selectedImage.filePath?\"รูปภาพ\":\"ข้อความ\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-image-container\",children:selectedImage.filePath?/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${selectedImage.filePath}`,alt:\"Full preview\",className:\"modal-image\",style:{width:\"100%\",height:\"auto\",maxHeight:\"400px\",// ปรับตามขนาด modal ที่ต้องการ\nobjectFit:\"contain\",borderRadius:\"18px\",display:\"block\",margin:\"0 auto\"}}):/*#__PURE__*/_jsxs(\"div\",{style:{background:\"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",borderRadius:\"18px\",minHeight:\"80px\",minWidth:\"100%\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"0 auto\",boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",padding:\"24px 0\"},children:[selectedImage.socialType&&selectedImage.socialName&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"16px\",marginTop:\"8px\",color:\"#fff\",fontWeight:\"bold\",fontSize:\"24px\",maxWidth:\"100%\",wordBreak:\"break-all\",display:\"inline-flex\",alignItems:\"center\"},children:renderSocialOnImage(selectedImage.socialType,selectedImage.socialName)}),/*#__PURE__*/_jsx(\"div\",{style:{color:selectedImage.textColor||\"#fff\",fontWeight:\"bold\",fontSize:\"20px\",textShadow:selectedImage.textColor===\"white\"?\"0 2px 8px rgba(0,0,0,0.8)\":\"0 2px 8px rgba(255,255,255,0.8)\",textAlign:\"center\",wordBreak:\"break-all\"},children:selectedImage.text})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\u0E1C\\u0E39\\u0E49\\u0E2A\\u0E48\\u0E07:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:selectedImage.sender})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[selectedImage.time,\" \\u0E19\\u0E32\\u0E17\\u0E35\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\u0E23\\u0E32\\u0E04\\u0E32:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"\\u0E3F\",selectedImage.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\u0E2A\\u0E48\\u0E07\\u0E40\\u0E21\\u0E37\\u0E48\\u0E2D:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formatDate(selectedImage.createdAt)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"approve-button\",onClick:()=>handleApprove(selectedImage.id),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20 6L9 17l-5-5\"})}),\"\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"reject-button\",onClick:()=>handleReject(selectedImage.id),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]}),\"\\u0E1B\\u0E0F\\u0E34\\u0E40\\u0E2A\\u0E18\"]})]})]})})]});}export default ImageQueue;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ImageQueue","images","setImages","loading","setLoading","selectedImage","setSelectedImage","showModal","setShowModal","currentPreview","setCurrentPreview","previewQueue","setPreviewQueue","timeLeft","setTimeLeft","isActive","setIsActive","isPaused","setIsPaused","pauseTimeLeft","setPauseTimeLeft","fetchImages","interval","setInterval","clearInterval","startPreview","image","now","Date","time","localStorage","setItem","JSON","stringify","startTimestamp","Number","getItem","duration","elapsed","Math","floor","left","removeItem","length","response","fetch","ok","data","json","error","console","handleImageClick","handleApprove","id","method","imageToApprove","prev","handleReject","formatDate","dateString","toLocaleString","day","month","year","hour","minute","formatTime","seconds","mins","secs","toString","padStart","savedPreview","savedIsActive","parse","renderSocialOnImage","socialType","socialName","style","display","alignItems","gap","children","width","height","viewBox","fill","x","y","rx","cx","cy","r","d","textAnchor","fontSize","fontFamily","renderGiftOrder","item","gift","giftOrder","className","tableNumber","sender","price","items","map","giftItem","name","quantity","note","to","stroke","strokeWidth","onClick","ry","index","position","type","filePath","src","alt","composed","text","color","textColor","background","borderRadius","minHeight","minWidth","flexDirection","justifyContent","margin","boxShadow","padding","marginBottom","marginTop","fontWeight","maxWidth","wordBreak","textShadow","textAlign","receivedAt","onError","e","target","round","queueImage","slice","stopPropagation","x1","y1","x2","y2","maxHeight","objectFit","createdAt"],"sources":["C:/Users/CRcra/Downloads/Test/Admin--/frontend/src/ImageQueue.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./ImageQueue.css\";\r\n\r\nfunction ImageQueue() {\r\n  const [images, setImages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  \r\n  // สำหรับ Preview และ Queue System\r\n  const [currentPreview, setCurrentPreview] = useState(null);\r\n  const [previewQueue, setPreviewQueue] = useState([]);\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [isPaused, setIsPaused] = useState(false);\r\n  const [pauseTimeLeft, setPauseTimeLeft] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchImages();\r\n    const interval = setInterval(fetchImages, 5000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // เมื่อเริ่มแสดงรูปใหม่ (ใน processNextInQueue หรือ handleApprove)\r\n  const startPreview = (image) => {\r\n    const now = Date.now();\r\n    setCurrentPreview(image);\r\n    setTimeLeft(image.time * 60);\r\n    setIsActive(true);\r\n    localStorage.setItem(\"currentPreview\", JSON.stringify(image));\r\n    localStorage.setItem(\"startTimestamp\", now);\r\n    localStorage.setItem(\"duration\", image.time * 60);\r\n    localStorage.setItem(\"isActive\", true);\r\n  };\r\n\r\n  // Timer effect สำหรับ countdown\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (isActive && currentPreview) {\r\n      interval = setInterval(() => {\r\n        const startTimestamp = Number(localStorage.getItem(\"startTimestamp\"));\r\n        const duration = Number(localStorage.getItem(\"duration\"));\r\n        const now = Date.now();\r\n        const elapsed = Math.floor((now - startTimestamp) / 1000);\r\n        const left = duration - elapsed;\r\n        setTimeLeft(left > 0 ? left : 0);\r\n        if (left <= 0) {\r\n          setIsActive(false);\r\n          setCurrentPreview(null);\r\n          localStorage.removeItem(\"currentPreview\");\r\n          localStorage.removeItem(\"startTimestamp\");\r\n          localStorage.removeItem(\"duration\");\r\n          localStorage.removeItem(\"isActive\");\r\n          if (previewQueue.length > 0) {\r\n            setIsPaused(true);\r\n            setPauseTimeLeft(15);\r\n          } else {\r\n            fetchImages();\r\n          }\r\n        }\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [isActive, currentPreview, previewQueue.length]);\r\n\r\n  const fetchImages = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5001/api/queue\");\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setImages(data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching images:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleImageClick = (image) => {\r\n    setSelectedImage(image);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleApprove = async (id) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5001/api/approve/${id}`, {\r\n        method: \"POST\",\r\n      });\r\n      if (response.ok) {\r\n        const imageToApprove = selectedImage;\r\n        if (!currentPreview) {\r\n          startPreview(imageToApprove);\r\n        } else {\r\n          setPreviewQueue(prev => [...prev, imageToApprove]);\r\n        }\r\n        setShowModal(false);\r\n        fetchImages();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error approving image:\", error);\r\n    }\r\n  };\r\n\r\n  const handleReject = async (id) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5001/api/reject/${id}`, {\r\n        method: \"POST\",\r\n      });\r\n      if (response.ok) {\r\n        fetchImages();\r\n        setShowModal(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error rejecting image:\", error);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleString('th-TH', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // เพิ่ม useEffect สำหรับ restore state\r\n  useEffect(() => {\r\n    const savedPreview = localStorage.getItem(\"currentPreview\");\r\n    const savedIsActive = localStorage.getItem(\"isActive\");\r\n    const startTimestamp = Number(localStorage.getItem(\"startTimestamp\"));\r\n    const duration = Number(localStorage.getItem(\"duration\"));\r\n    if (savedPreview && savedIsActive === \"true\" && startTimestamp && duration) {\r\n      const now = Date.now();\r\n      const elapsed = Math.floor((now - startTimestamp) / 1000);\r\n      const left = duration - elapsed;\r\n      if (left > 0) {\r\n        setCurrentPreview(JSON.parse(savedPreview));\r\n        setTimeLeft(left);\r\n        setIsActive(true);\r\n      } else {\r\n        setCurrentPreview(null);\r\n        setIsActive(false);\r\n        localStorage.removeItem(\"currentPreview\");\r\n        localStorage.removeItem(\"startTimestamp\");\r\n        localStorage.removeItem(\"duration\");\r\n        localStorage.removeItem(\"isActive\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // ทุกครั้งที่ state เปลี่ยน ให้ sync ลง localStorage\r\n  useEffect(() => {\r\n    if (currentPreview && isActive) {\r\n      localStorage.setItem(\"currentPreview\", JSON.stringify(currentPreview));\r\n      localStorage.setItem(\"timeLeft\", timeLeft);\r\n      localStorage.setItem(\"isActive\", isActive);\r\n      localStorage.setItem(\"isPaused\", isPaused);\r\n      localStorage.setItem(\"pauseTimeLeft\", pauseTimeLeft);\r\n    } else {\r\n      // ถ้าไม่มี preview แล้ว ให้ลบออก\r\n      localStorage.removeItem(\"currentPreview\");\r\n      localStorage.removeItem(\"timeLeft\");\r\n      localStorage.removeItem(\"isActive\");\r\n      localStorage.removeItem(\"isPaused\");\r\n      localStorage.removeItem(\"pauseTimeLeft\");\r\n    }\r\n  }, [currentPreview, timeLeft, isActive, isPaused, pauseTimeLeft]);\r\n\r\n  function renderSocialOnImage(socialType, socialName) {\r\n    switch (socialType) {\r\n      case \"ig\":\r\n        return (\r\n          <span style={{ display: \"inline-flex\", alignItems: \"center\", gap: 4 }}>\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"5\" fill=\"#E1306C\"/>\r\n              <circle cx=\"12\" cy=\"12\" r=\"5\" fill=\"#fff\"/>\r\n              <circle cx=\"18\" cy=\"6\" r=\"1.5\" fill=\"#fff\"/>\r\n            </svg>\r\n            {socialName}\r\n          </span>\r\n        );\r\n      case \"fb\":\r\n        return (\r\n          <span style={{ display: \"inline-flex\", alignItems: \"center\", gap: 4 }}>\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"#1877F3\">\r\n              <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\r\n            </svg>\r\n            {socialName}\r\n          </span>\r\n        );\r\n      case \"line\":\r\n        return (\r\n          <span style={{ display: \"inline-flex\", alignItems: \"center\", gap: 4 }}>\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"#06C755\">\r\n              <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"5\"/>\r\n              <text x=\"12\" y=\"16\" textAnchor=\"middle\" fontSize=\"10\" fill=\"#fff\" fontFamily=\"Arial\">LINE</text>\r\n            </svg>\r\n            {socialName}\r\n          </span>\r\n        );\r\n      case \"tiktok\":\r\n        return (\r\n          <span style={{ display: \"inline-flex\", alignItems: \"center\", gap: 4 }}>\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"#000\">\r\n              <path d=\"M9.5 3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1.5a5.5 5.5 0 0 0 5.5 5.5h1.5a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1.5A5.5 5.5 0 0 0 14.5 19.5V21a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-1.5A5.5 5.5 0 0 0 3 14.5V13a1 1 0 0 1 1-1h1.5A5.5 5.5 0 0 0 9.5 4.5V3z\"/>\r\n            </svg>\r\n            {socialName}\r\n          </span>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  function renderGiftOrder(item) {\r\n    const gift = item.giftOrder || {};\r\n    return (\r\n      <div className=\"gift-order-card\">\r\n        <div className=\"gift-order-header\">\r\n          <div>\r\n            <span className=\"gift-table\">โต๊ะ #{gift.tableNumber || \"-\"}</span>\r\n            <p className=\"gift-sender\">จาก: {item.sender}</p>\r\n          </div>\r\n          <span className=\"gift-total\">฿{item.price}</span>\r\n        </div>\r\n        <ul className=\"gift-items\">\r\n          {(gift.items || []).map((giftItem) => (\r\n            <li key={`${item.id}-${giftItem.id}`}>{giftItem.name} x{giftItem.quantity}</li>\r\n          ))}\r\n        </ul>\r\n        {gift.note && <p className=\"gift-note\">\"{gift.note}\"</p>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"queue-container\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"spinner\"></div>\r\n          <p>กำลังโหลด...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"queue-container\">\r\n      <header className=\"queue-header\">\r\n        <Link to=\"/home\" className=\"back-button\">\r\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <path d=\"M19 12H5M12 19l-7-7 7-7\"/>\r\n          </svg>\r\n          กลับ\r\n        </Link>\r\n        <h1>ตรวจสอบรูปภาพ</h1>\r\n        <div className=\"queue-stats\">\r\n          <span className=\"queue-count\">{images.length}</span>\r\n          <button onClick={fetchImages} className=\"refresh-button\">\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M23 4v6h-6M1 20v-6h6M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"main-layout\">\r\n        {/* ฝั่งซ้าย - Queue (70%) */}\r\n        <div className=\"queue-section\">\r\n          <div className=\"queue-content\">\r\n            {images.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\">\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"/>\r\n                  <path d=\"M21 15l-5-5L5 21\"/>\r\n                </svg>\r\n                <p>ไม่มีรูปภาพส่งมา</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"images-grid\">\r\n                {images.map((image, index) => (\r\n                  <div key={image.id} className=\"image-card\" onClick={() => handleImageClick(image)}>\r\n                    <div className=\"card-header\">\r\n                      <span className=\"queue-number\">#{index + 1}</span>\r\n                      <span className=\"sender\">{image.sender}</span>\r\n                    </div>\r\n                    <div className=\"image-preview-container\" style={{ position: \"relative\" }}>\r\n                      {image.type === \"gift\" ? (\r\n                        renderGiftOrder(image)\r\n                      ) : image.filePath ? (\r\n                        <>\r\n                          <img\r\n                            src={`http://localhost:5001${image.filePath}`}\r\n                            alt=\"Preview\"\r\n                            className=\"preview-image\"\r\n                          />\r\n                          {(!image.composed && image.socialType && image.socialName) && (\r\n                            <div className=\"preview-social-overlay\">\r\n                              {renderSocialOnImage(image.socialType, image.socialName)}\r\n                            </div>\r\n                          )}\r\n                          {(!image.composed && image.text) && (\r\n                            <div className=\"preview-text-overlay\" style={{ color: image.textColor }}>\r\n                              {image.text}\r\n                            </div>\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        // กรณีข้อความล้วนเหมือนเดิม\r\n                        <div\r\n                          className=\"text-only-card\"\r\n                          style={{\r\n                            background: \"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",\r\n                            borderRadius: \"18px\",\r\n                            minHeight: \"120px\",\r\n                            minWidth: \"100%\",\r\n                            display: \"flex\",\r\n                            flexDirection: \"column\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                            margin: \"0 auto\",\r\n                            boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\",\r\n                            padding: \"24px 0\"\r\n                          }}\r\n                        >\r\n                          {image.socialType && image.socialName && (\r\n                            <div\r\n                              style={{\r\n                                marginBottom: \"16px\",\r\n                                marginTop: \"8px\",\r\n                                color: \"#fff\",\r\n                                fontWeight: \"bold\",\r\n                                fontSize: \"24px\",\r\n                                maxWidth: \"100%\",\r\n                                wordBreak: \"break-all\",\r\n                                display: \"inline-flex\",\r\n                                alignItems: \"center\"\r\n                              }}\r\n                            >\r\n                              {renderSocialOnImage(image.socialType, image.socialName)}\r\n                            </div>\r\n                          )}\r\n                          <div\r\n                            style={{\r\n                              color: image.textColor || \"#fff\",\r\n                              fontWeight: \"bold\",\r\n                              fontSize: \"20px\",\r\n                              textShadow: image.textColor === \"white\"\r\n                                ? \"0 2px 8px rgba(0,0,0,0.8)\"\r\n                                : \"0 2px 8px rgba(255,255,255,0.8)\",\r\n                              textAlign: \"center\",\r\n                              wordBreak: \"break-all\"\r\n                            }}\r\n                          >\r\n                            {image.text}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    <div className=\"card-footer\">\r\n                      <div className=\"time-price\">\r\n                        <span className=\"time\">{image.time}นาที</span>\r\n                        <span className=\"price\">฿{image.price}</span>\r\n                      </div>\r\n                      <div className=\"date\">{formatDate(image.receivedAt)}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ฝั่งขวา - Preview (30%) */}\r\n        <div className=\"preview-section\">\r\n          <div className=\"preview-panel\">\r\n            <h2>รูปภาพที่กำลังแสดง</h2>\r\n            \r\n            {currentPreview ? (\r\n              <>\r\n                <div className=\"preview-image-container\" style={{ position: \"relative\" }}>\r\n                  {currentPreview.type === \"gift\" ? (\r\n                    renderGiftOrder(currentPreview)\r\n                  ) : currentPreview.filePath ? (\r\n                    <img \r\n                      src={`http://localhost:5001${currentPreview.filePath}`} \r\n                      alt=\"Preview\"\r\n                      className=\"preview-image\"\r\n                      onError={(e) => {\r\n                        e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y5ZmFmYiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0cHgiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5No Image</text></svg>';\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    // กรณีไม่มีรูป (ฟังก์ชันส่งข้อความ)\r\n                    <div\r\n                      style={{\r\n                        background: \"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",\r\n                        borderRadius: \"18px\",\r\n                        minHeight: \"120px\",\r\n                        minWidth: \"100%\",\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        margin: \"0 auto\",\r\n                        boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\",\r\n                        padding: \"24px 0\"\r\n                      }}\r\n                    >\r\n                      {currentPreview.socialType && currentPreview.socialName && (\r\n                        <div\r\n                          style={{\r\n                            marginBottom: \"16px\",\r\n                            marginTop: \"8px\",\r\n                            color: \"#fff\",\r\n                            fontWeight: \"bold\",\r\n                            fontSize: \"24px\",\r\n                            maxWidth: \"100%\",\r\n                            wordBreak: \"break-all\",\r\n                            display: \"inline-flex\",\r\n                            alignItems: \"center\"\r\n                          }}\r\n                        >\r\n                          {renderSocialOnImage(currentPreview.socialType, currentPreview.socialName)}\r\n                        </div>\r\n                      )}\r\n                      <div\r\n                        style={{\r\n                          color: currentPreview.textColor || \"#fff\",\r\n                          fontWeight: \"bold\",\r\n                          fontSize: \"20px\",\r\n                          textShadow: currentPreview.textColor === \"white\"\r\n                            ? \"0 2px 8px rgba(0,0,0,0.8)\"\r\n                            : \"0 2px 8px rgba(255,255,255,0.8)\",\r\n                          textAlign: \"center\",\r\n                          wordBreak: \"break-all\"\r\n                        }}\r\n                      >\r\n                        {currentPreview.text}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"countdown-section\">\r\n                  <div className=\"countdown-label\">\r\n                    {isPaused ? \"หน่วงเวลาระหว่างรูป:\" : \"เวลาที่เหลือ:\"}\r\n                  </div>\r\n                  <div className={`countdown-timer ${(timeLeft <= 10 && !isPaused) || (pauseTimeLeft <= 5 && isPaused) ? 'warning' : ''}`}>\r\n                    {isPaused ? formatTime(pauseTimeLeft) : formatTime(timeLeft)}\r\n                  </div>\r\n                  {timeLeft === 0 && !isPaused && (\r\n                    <div className=\"time-up-message\">หมดเวลาแล้ว!</div>\r\n                  )}\r\n                  {isPaused && (\r\n                    <div className=\"pause-message\">กำลังเปลี่ยนรูป...</div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"info-section\">\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">คิว:</span>\r\n                    <span className=\"info-value\">กำลังแสดง</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">เวลาการแสดง:</span>\r\n                    <span className=\"info-value\">{currentPreview.time} นาที</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">แอปโมชั่น:</span>\r\n                    <span className=\"info-value\">ไม่มี</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">ข้อความ:</span>\r\n                    <span className=\"info-value\">{currentPreview.text || 'ไม่มี'}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {!isPaused && (\r\n                  <div className=\"progress-section\">\r\n                    <div className=\"progress-bar\">\r\n                      <div \r\n                        className=\"progress-fill\"\r\n                        style={{ \r\n                          width: `${((currentPreview.time * 60 - timeLeft) / (currentPreview.time * 60)) * 100}%` \r\n                        }}\r\n                      ></div>\r\n                    </div>\r\n                    <div className=\"progress-text\">\r\n                      {Math.round(((currentPreview.time * 60 - timeLeft) / (currentPreview.time * 60)) * 100)}% เสร็จสิ้น\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <div className=\"no-preview\">\r\n                <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\">\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"/>\r\n                  <path d=\"M21 15l-5-5L5 21\"/>\r\n                </svg>\r\n                <p>ยังไม่มีรูปภาพที่อนุมัติ</p>\r\n                <span>กดอนุมัติรูปภาพเพื่อแสดง Preview</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* แสดงคิวที่รออยู่ */}\r\n            {previewQueue.length > 0 && (\r\n              <div className=\"waiting-queue\">\r\n                <h3>คิวที่รออยู่ ({previewQueue.length})</h3>\r\n                <div className=\"queue-list\">\r\n                  {previewQueue.map((queueImage, index) => (\r\n                    <div key={`queue-${index}`} className=\"queue-item\">\r\n                      <div className=\"queue-item-number\">#{index + 1}</div>\r\n                      <div className=\"queue-item-image\">\r\n                        <img \r\n                          src={`http://localhost:5001${queueImage.filePath}`} \r\n                          alt=\"Queue preview\"\r\n                          onError={(e) => {\r\n                            e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjZjlmYWZiIi8+PC9zdmc+';\r\n                          }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"queue-item-info\">\r\n                        <div className=\"queue-item-time\">{queueImage.time}นาที</div>\r\n                        <div className=\"queue-item-text\">\r\n                          {queueImage.text ? queueImage.text.slice(0, 15) + '...' : 'ไม่มีข้อความ'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Modal สำหรับดูรายละเอียด */}\r\n      {showModal && selectedImage && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2>รายละเอียด{selectedImage.filePath ? \"รูปภาพ\" : \"ข้อความ\"}</h2>\r\n              <button className=\"close-button\" onClick={() => setShowModal(false)}>\r\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"modal-image-container\">\r\n                {selectedImage.filePath ? (\r\n                  <img \r\n                    src={`http://localhost:5001${selectedImage.filePath}`} \r\n                    alt=\"Full preview\"\r\n                    className=\"modal-image\"\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"auto\",\r\n                      maxHeight: \"400px\", // ปรับตามขนาด modal ที่ต้องการ\r\n                      objectFit: \"contain\",\r\n                      borderRadius: \"18px\",\r\n                      display: \"block\",\r\n                      margin: \"0 auto\"\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div\r\n                    style={{\r\n                      background: \"linear-gradient(135deg,#233046 60%,#1e293b 100%)\",\r\n                      borderRadius: \"18px\",\r\n                      minHeight: \"80px\",\r\n                      minWidth: \"100%\",\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      margin: \"0 auto\",\r\n                      boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\",\r\n                      padding: \"24px 0\"\r\n                    }}\r\n                  >\r\n                    {selectedImage.socialType && selectedImage.socialName && (\r\n                      <div\r\n                        style={{\r\n                          marginBottom: \"16px\",\r\n                          marginTop: \"8px\",\r\n                          color: \"#fff\",\r\n                          fontWeight: \"bold\",\r\n                          fontSize: \"24px\",\r\n                          maxWidth: \"100%\",\r\n                          wordBreak: \"break-all\",\r\n                          display: \"inline-flex\",\r\n                          alignItems: \"center\"\r\n                        }}\r\n                      >\r\n                        {renderSocialOnImage(selectedImage.socialType, selectedImage.socialName)}\r\n                      </div>\r\n                    )}\r\n                    <div\r\n                      style={{\r\n                        color: selectedImage.textColor || \"#fff\",\r\n                        fontWeight: \"bold\",\r\n                        fontSize: \"20px\",\r\n                        textShadow: selectedImage.textColor === \"white\"\r\n                          ? \"0 2px 8px rgba(0,0,0,0.8)\"\r\n                          : \"0 2px 8px rgba(255,255,255,0.8)\",\r\n                        textAlign: \"center\",\r\n                        wordBreak: \"break-all\"\r\n                      }}\r\n                    >\r\n                      {selectedImage.text}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"modal-details\">\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">ผู้ส่ง:</span>\r\n                  <span className=\"value\">{selectedImage.sender}</span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">เวลาที่เลือก:</span>\r\n                  <span className=\"value\">{selectedImage.time} นาที</span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">ราคา:</span>\r\n                  <span className=\"value\">฿{selectedImage.price}</span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">ส่งเมื่อ:</span>\r\n                  <span className=\"value\">{formatDate(selectedImage.createdAt)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-actions\">\r\n              <button \r\n                className=\"approve-button\"\r\n                onClick={() => handleApprove(selectedImage.id)}\r\n              >\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M20 6L9 17l-5-5\"/>\r\n                </svg>\r\n                อนุมัติ\r\n              </button>\r\n              <button \r\n                className=\"reject-button\"\r\n                onClick={() => handleReject(selectedImage.id)}\r\n              >\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n                </svg>\r\n                ปฏิเสธ\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImageQueue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}