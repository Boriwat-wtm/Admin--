{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Link}from\"react-router-dom\";import\"./Giftsetting.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Giftsetting(){const API_BASE=\"http://localhost:5001\";const[items,setItems]=useState([]);const[tableCount,setTableCount]=useState(10);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[message,setMessage]=useState(\"\");const[form,setForm]=useState({name:\"\",price:\"\",description:\"\",imageUrl:\"\"});const[localImage,setLocalImage]=useState(null);const[previewUrl,setPreviewUrl]=useState(\"\");const fileInputRef=useRef(null);const resolveImageSrc=url=>{if(!url)return\"\";return url.startsWith(\"http\")?url:`${API_BASE}${url}`;};useEffect(()=>{loadSettings();},[]);useEffect(()=>{return()=>{if(previewUrl){URL.revokeObjectURL(previewUrl);}};},[previewUrl]);const loadSettings=async()=>{setLoading(true);try{const response=await fetch(`${API_BASE}/api/gifts/settings`);const data=await response.json();setItems(data.items||[]);setTableCount(data.tableCount||10);}catch(error){console.error(\"Load gift settings failed\",error);setMessage(\"ไม่สามารถโหลดข้อมูลสินค้าได้\");}finally{setLoading(false);}};const handleInputChange=(field,value)=>{setForm(prev=>({...prev,[field]:value}));};const handleAddItem=async e=>{e.preventDefault();if(!form.name||!form.price){setMessage(\"กรุณากรอกชื่อและราคา\");return;}setSaving(true);setMessage(\"\");try{var _form$imageUrl;let imageUrlToSave=((_form$imageUrl=form.imageUrl)===null||_form$imageUrl===void 0?void 0:_form$imageUrl.trim())||\"\";if(!imageUrlToSave&&localImage){const uploadForm=new FormData();uploadForm.append(\"image\",localImage);const uploadResponse=await fetch(`${API_BASE}/api/gifts/upload`,{method:\"POST\",body:uploadForm});const uploadData=await uploadResponse.json();if(!uploadResponse.ok||!uploadData.success){throw new Error(uploadData.message||\"อัปโหลดรูปภาพไม่สำเร็จ\");}imageUrlToSave=uploadData.url||\"\";}const response=await fetch(`${API_BASE}/api/gifts/items`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:form.name,price:Number(form.price),description:form.description,imageUrl:imageUrlToSave})});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"เพิ่มสินค้าล้มเหลว\");}setItems(data.settings.items||[]);setForm({name:\"\",price:\"\",description:\"\",imageUrl:\"\"});setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");if(fileInputRef.current){fileInputRef.current.value=\"\";}setMessage(\"เพิ่มสินค้าสำเร็จ\");}catch(error){console.error(\"Add gift item failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}finally{setSaving(false);}};const handleDelete=async id=>{if(!window.confirm(\"ต้องการลบสินค้ารายการนี้หรือไม่?\"))return;try{const response=await fetch(`${API_BASE}/api/gifts/items/${id}`,{method:\"DELETE\"});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"ลบไม่สำเร็จ\");}setItems(data.settings.items||[]);}catch(error){console.error(\"Delete gift item failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}};const handleTableUpdate=async()=>{if(!tableCount||Number(tableCount)<1){setMessage(\"จำนวนโต๊ะต้องมากกว่า 0\");return;}try{const response=await fetch(`${API_BASE}/api/gifts/table-count`,{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tableCount:Number(tableCount)})});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"บันทึกไม่สำเร็จ\");}setItems(data.settings.items||[]);setTableCount(data.settings.tableCount||tableCount);setMessage(\"อัปเดตจำนวนโต๊ะเรียบร้อย\");}catch(error){console.error(\"Update table count failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}};const handleFileChange=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(!file){setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");return;}if(previewUrl){URL.revokeObjectURL(previewUrl);}setLocalImage(file);setPreviewUrl(URL.createObjectURL(file));setForm(prev=>({...prev,imageUrl:\"\"}));};const clearLocalImage=()=>{setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");if(fileInputRef.current){fileInputRef.current.value=\"\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"giftsetting-shell\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"giftsetting-hero\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"eyebrow\",children:\"CMS ADMIN\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E15\\u0E31\\u0E49\\u0E07\\u0E04\\u0E48\\u0E32\\u0E2A\\u0E48\\u0E07\\u0E02\\u0E2D\\u0E07\\u0E02\\u0E27\\u0E31\\u0E0D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E41\\u0E25\\u0E30\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E1E\\u0E23\\u0E49\\u0E2D\\u0E21\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"ghost-link\",children:\"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ghost-button\",onClick:loadSettings,children:\"\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"giftsetting-layout\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E17\\u0E35\\u0E48\\u0E23\\u0E2D\\u0E07\\u0E23\\u0E31\\u0E1A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E40\\u0E25\\u0E02\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E2A\\u0E39\\u0E07\\u0E2A\\u0E38\\u0E14\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E02\\u0E2D\\u0E07\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-button\",onClick:handleTableUpdate,children:\"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-config\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:tableCount,onChange:e=>setTableCount(e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"helper-text\",children:[\"\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19 \",tableCount,\" \\u0E42\\u0E15\\u0E4A\\u0E30\"]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E07\\u0E02\\u0E2D\\u0E07\\u0E02\\u0E27\\u0E31\\u0E0D\"})]}),saving&&/*#__PURE__*/_jsx(\"span\",{className:\"chip\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"gift-form\",onSubmit:handleAddItem,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>handleInputChange(\"name\",e.target.value),placeholder:\"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E0A\\u0E48\\u0E2D\\u0E14\\u0E2D\\u0E01\\u0E44\\u0E21\\u0E49\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E1A\\u0E32\\u0E17)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:form.price,onChange:e=>handleInputChange(\"price\",e.target.value),placeholder:\"\\u0E40\\u0E0A\\u0E48\\u0E19 150\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E25\\u0E34\\u0E07\\u0E01\\u0E4C\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E (\\u0E44\\u0E21\\u0E48\\u0E1A\\u0E31\\u0E07\\u0E04\\u0E31\\u0E1A)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:form.imageUrl,onChange:e=>handleInputChange(\"imageUrl\",e.target.value),placeholder:\"https://...\"}),/*#__PURE__*/_jsx(\"small\",{className:\"helper-text\",children:\"\\u0E2B\\u0E32\\u0E01\\u0E43\\u0E2A\\u0E48\\u0E25\\u0E34\\u0E07\\u0E01\\u0E4C \\u0E23\\u0E39\\u0E1B\\u0E08\\u0E30\\u0E44\\u0E21\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E44\\u0E1F\\u0E25\\u0E4C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field file-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E23\\u0E39\\u0E1B\\u0E08\\u0E32\\u0E01\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,ref:fileInputRef}),/*#__PURE__*/_jsx(\"small\",{className:\"helper-text\",children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E39\\u0E1B\\u0E08\\u0E32\\u0E01\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E19\\u0E36\\u0E48\\u0E07\\u0E23\\u0E39\\u0E1B \\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E30\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E43\\u0E2B\\u0E49\\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"})]})]}),previewUrl&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"\\u0E15\\u0E31\\u0E27\\u0E2D\\u0E22\\u0E48\\u0E32\\u0E07\\u0E23\\u0E39\\u0E1B\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ghost-button\",onClick:clearLocalImage,children:\"\\u0E25\\u0E49\\u0E32\\u0E07\\u0E23\\u0E39\\u0E1B\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"3\",value:form.description,onChange:e=>handleInputChange(\"description\",e.target.value),placeholder:\"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"primary-button\",disabled:saving,children:saving?\"กำลังบันทึก...\":\"เพิ่มสินค้า\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-head\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 (\",items.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E2B\\u0E49\\u0E1E\\u0E23\\u0E49\\u0E2D\\u0E21\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E01\\u0E31\\u0E1A\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"panel-empty\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"}):items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"panel-empty\",children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}):/*#__PURE__*/_jsx(\"div\",{className:\"gift-items-table\",children:items.map(item=>{var _item$name,_item$name$charAt;return/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row-main\",children:[item.imageUrl?/*#__PURE__*/_jsx(\"img\",{src:resolveImageSrc(item.imageUrl),alt:item.name,className:\"gift-thumb\"}):/*#__PURE__*/_jsx(\"div\",{className:\"gift-thumb placeholder\",children:((_item$name=item.name)===null||_item$name===void 0?void 0:(_item$name$charAt=_item$name.charAt(0))===null||_item$name$charAt===void 0?void 0:_item$name$charAt.toUpperCase())||\"?\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),item.description&&/*#__PURE__*/_jsx(\"p\",{children:item.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"\\u0E3F\",item.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"ghost-button\",onClick:()=>handleDelete(item.id),children:\"\\u0E25\\u0E1A\"})]})]},item.id);})})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"giftsetting-alert\",children:message})]})]});}export default Giftsetting;","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","jsx","_jsx","jsxs","_jsxs","Giftsetting","API_BASE","items","setItems","tableCount","setTableCount","loading","setLoading","saving","setSaving","message","setMessage","form","setForm","name","price","description","imageUrl","localImage","setLocalImage","previewUrl","setPreviewUrl","fileInputRef","resolveImageSrc","url","startsWith","loadSettings","URL","revokeObjectURL","response","fetch","data","json","error","console","handleInputChange","field","value","prev","handleAddItem","e","preventDefault","_form$imageUrl","imageUrlToSave","trim","uploadForm","FormData","append","uploadResponse","method","body","uploadData","ok","success","Error","headers","JSON","stringify","Number","settings","current","handleDelete","id","window","confirm","handleTableUpdate","handleFileChange","event","_event$target$files","file","target","files","createObjectURL","clearLocalImage","className","children","to","onClick","type","min","onChange","onSubmit","placeholder","accept","ref","src","alt","rows","disabled","length","map","item","_item$name","_item$name$charAt","charAt","toUpperCase"],"sources":["C:/Users/CRcra/Downloads/Test/Admin--/frontend/src/Giftsetting.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Giftsetting.css\";\r\n\r\nfunction Giftsetting() {\r\n\tconst API_BASE = \"http://localhost:5001\";\r\n\tconst [items, setItems] = useState([]);\r\n\tconst [tableCount, setTableCount] = useState(10);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [saving, setSaving] = useState(false);\r\n\tconst [message, setMessage] = useState(\"\");\r\n\tconst [form, setForm] = useState({ name: \"\", price: \"\", description: \"\", imageUrl: \"\" });\r\n\tconst [localImage, setLocalImage] = useState(null);\r\n\tconst [previewUrl, setPreviewUrl] = useState(\"\");\r\n\tconst fileInputRef = useRef(null);\r\n\r\n\tconst resolveImageSrc = (url) => {\r\n\t\tif (!url) return \"\";\r\n\t\treturn url.startsWith(\"http\") ? url : `${API_BASE}${url}`;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tloadSettings();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t};\r\n\t}, [previewUrl]);\r\n\r\n\tconst loadSettings = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/settings`);\r\n\t\t\tconst data = await response.json();\r\n\t\t\tsetItems(data.items || []);\r\n\t\t\tsetTableCount(data.tableCount || 10);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Load gift settings failed\", error);\r\n\t\t\tsetMessage(\"ไม่สามารถโหลดข้อมูลสินค้าได้\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleInputChange = (field, value) => {\r\n\t\tsetForm((prev) => ({ ...prev, [field]: value }));\r\n\t};\r\n\r\n\tconst handleAddItem = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!form.name || !form.price) {\r\n\t\t\tsetMessage(\"กรุณากรอกชื่อและราคา\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSaving(true);\r\n\t\tsetMessage(\"\");\r\n\t\ttry {\r\n\t\t\tlet imageUrlToSave = form.imageUrl?.trim() || \"\";\r\n\t\t\tif (!imageUrlToSave && localImage) {\r\n\t\t\t\tconst uploadForm = new FormData();\r\n\t\t\t\tuploadForm.append(\"image\", localImage);\r\n\t\t\t\tconst uploadResponse = await fetch(`${API_BASE}/api/gifts/upload`, {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tbody: uploadForm,\r\n\t\t\t\t});\r\n\t\t\t\tconst uploadData = await uploadResponse.json();\r\n\t\t\t\tif (!uploadResponse.ok || !uploadData.success) {\r\n\t\t\t\t\tthrow new Error(uploadData.message || \"อัปโหลดรูปภาพไม่สำเร็จ\");\r\n\t\t\t\t}\r\n\t\t\t\timageUrlToSave = uploadData.url || \"\";\r\n\t\t\t}\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/items`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tname: form.name,\r\n\t\t\t\t\tprice: Number(form.price),\r\n\t\t\t\t\tdescription: form.description,\r\n\t\t\t\t\timageUrl: imageUrlToSave,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"เพิ่มสินค้าล้มเหลว\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t\tsetForm({ name: \"\", price: \"\", description: \"\", imageUrl: \"\" });\r\n\t\t\tsetLocalImage(null);\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t\tsetPreviewUrl(\"\");\r\n\t\t\tif (fileInputRef.current) {\r\n\t\t\t\tfileInputRef.current.value = \"\";\r\n\t\t\t}\r\n\t\t\tsetMessage(\"เพิ่มสินค้าสำเร็จ\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Add gift item failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t} finally {\r\n\t\t\tsetSaving(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDelete = async (id) => {\r\n\t\tif (!window.confirm(\"ต้องการลบสินค้ารายการนี้หรือไม่?\")) return;\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/items/${id}`, {\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"ลบไม่สำเร็จ\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Delete gift item failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleTableUpdate = async () => {\r\n\t\tif (!tableCount || Number(tableCount) < 1) {\r\n\t\t\tsetMessage(\"จำนวนโต๊ะต้องมากกว่า 0\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/table-count`, {\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({ tableCount: Number(tableCount) })\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"บันทึกไม่สำเร็จ\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t\tsetTableCount(data.settings.tableCount || tableCount);\r\n\t\t\tsetMessage(\"อัปเดตจำนวนโต๊ะเรียบร้อย\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Update table count failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleFileChange = (event) => {\r\n\t\tconst file = event.target.files?.[0];\r\n\t\tif (!file) {\r\n\t\t\tsetLocalImage(null);\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t\tsetPreviewUrl(\"\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (previewUrl) {\r\n\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t}\r\n\t\tsetLocalImage(file);\r\n\t\tsetPreviewUrl(URL.createObjectURL(file));\r\n\t\tsetForm((prev) => ({ ...prev, imageUrl: \"\" }));\r\n\t};\r\n\r\n\tconst clearLocalImage = () => {\r\n\t\tsetLocalImage(null);\r\n\t\tif (previewUrl) {\r\n\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t}\r\n\t\tsetPreviewUrl(\"\");\r\n\t\tif (fileInputRef.current) {\r\n\t\t\tfileInputRef.current.value = \"\";\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"giftsetting-shell\">\r\n\t\t\t<header className=\"giftsetting-hero\">\r\n\t\t\t\t<div className=\"hero-info\">\r\n\t\t\t\t\t<p className=\"eyebrow\">CMS ADMIN</p>\r\n\t\t\t\t\t<h1>ตั้งค่าส่งของขวัญ</h1>\r\n\t\t\t\t\t<p className=\"subtitle\">กำหนดจำนวนโต๊ะและสินค้าที่พร้อมให้ผู้ใช้เลือก</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"hero-actions\">\r\n\t\t\t\t\t<Link to=\"/home\" className=\"ghost-link\">กลับหน้าหลัก</Link>\r\n\t\t\t\t\t<button className=\"ghost-button\" onClick={loadSettings}>\r\n\t\t\t\t\t\tโหลดข้อมูลล่าสุด\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\r\n\t\t\t<main className=\"giftsetting-layout\">\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>จำนวนโต๊ะที่รองรับ</h2>\r\n\t\t\t\t\t\t\t<p>กำหนดเลขโต๊ะสูงสุดสำหรับคำสั่งซื้อของผู้ใช้</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button className=\"primary-button\" onClick={handleTableUpdate}>\r\n\t\t\t\t\t\t\tบันทึก\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"table-config\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\tvalue={tableCount}\r\n\t\t\t\t\t\t\tonChange={(e) => setTableCount(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span className=\"helper-text\">ปัจจุบัน {tableCount} โต๊ะ</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>เพิ่มรายการสินค้า</h2>\r\n\t\t\t\t\t\t\t<p>กรอกข้อมูลสินค้าเพื่อให้ผู้ใช้เลือกส่งของขวัญ</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{saving && <span className=\"chip\">กำลังบันทึก...</span>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form className=\"gift-form\" onSubmit={handleAddItem}>\r\n\t\t\t\t\t\t<div className=\"form-grid\">\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>ชื่อสินค้า</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"name\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"เช่น ช่อดอกไม้\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>ราคา (บาท)</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.price}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"เช่น 150\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>ลิงก์รูปภาพ (ไม่บังคับ)</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"url\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.imageUrl}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"imageUrl\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://...\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<small className=\"helper-text\">หากใส่ลิงก์ รูปจะไม่ต้องอัปโหลดไฟล์</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-field file-field\">\r\n\t\t\t\t\t\t\t\t<label>อัปโหลดรูปจากเครื่อง</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleFileChange}\r\n\t\t\t\t\t\t\t\t\tref={fileInputRef}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<small className=\"helper-text\">เลือกรูปจากเครื่องได้หนึ่งรูป ระบบจะอัปโหลดให้อัตโนมัติ</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{previewUrl && (\r\n\t\t\t\t\t\t\t<div className=\"image-preview\">\r\n\t\t\t\t\t\t\t\t<img src={previewUrl} alt=\"ตัวอย่างรูป\" />\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"ghost-button\" onClick={clearLocalImage}>\r\n\t\t\t\t\t\t\t\t\tล้างรูป\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<label>รายละเอียด</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\tvalue={form.description}\r\n\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n\t\t\t\t\t\t\tplaceholder=\"คำอธิบายเพิ่มเติม\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"primary-button\" disabled={saving}>\r\n\t\t\t\t\t\t\t{saving ? \"กำลังบันทึก...\" : \"เพิ่มสินค้า\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>รายการสินค้าทั้งหมด ({items.length})</h2>\r\n\t\t\t\t\t\t\t<p>จัดการสินค้าให้พร้อมใช้งานกับระบบผู้ใช้</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t<div className=\"panel-empty\">กำลังโหลด...</div>\r\n\t\t\t\t\t) : items.length === 0 ? (\r\n\t\t\t\t\t\t<div className=\"panel-empty\">ยังไม่มีสินค้า</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"gift-items-table\">\r\n\t\t\t\t\t\t\t{items.map((item) => (\r\n\t\t\t\t\t\t\t\t<div key={item.id} className=\"gift-row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"gift-row-main\">\r\n\t\t\t\t\t\t\t\t\t\t{item.imageUrl ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={resolveImageSrc(item.imageUrl)} alt={item.name} className=\"gift-thumb\" />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"gift-thumb placeholder\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.name?.charAt(0)?.toUpperCase() || \"?\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<strong>{item.name}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.description && <p>{item.description}</p>}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"gift-row-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"price\">฿{item.price}</span>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"ghost-button\" onClick={() => handleDelete(item.id)}>\r\n\t\t\t\t\t\t\t\t\t\t\tลบ\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t{message && <div className=\"giftsetting-alert\">{message}</div>}\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Giftsetting;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}