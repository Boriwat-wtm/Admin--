{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Link}from\"react-router-dom\";import\"./Giftsetting.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const resolveApiBase=()=>{var _process$env$REACT_AP,_window$location;const fromEnv=(_process$env$REACT_AP=process.env.REACT_APP_ADMIN_API)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace(/\\/$/,\"\");if(fromEnv)return fromEnv;if(typeof window!==\"undefined\"&&(_window$location=window.location)!==null&&_window$location!==void 0&&_window$location.origin){const{origin}=window.location;if(origin.includes(\"localhost\")){return\"http://localhost:5001\";}return origin.replace(/\\/$/,\"\");}return\"http://localhost:5001\";};const API_BASE=resolveApiBase();function Giftsetting(){const[items,setItems]=useState([]);const[tableCount,setTableCount]=useState(10);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[message,setMessage]=useState(\"\");const[form,setForm]=useState({name:\"\",price:\"\",description:\"\"});const[localImage,setLocalImage]=useState(null);const[previewUrl,setPreviewUrl]=useState(\"\");const fileInputRef=useRef(null);const resolveImageSrc=url=>{if(!url)return\"\";return url.startsWith(\"http\")?url:`${API_BASE}${url}`;};useEffect(()=>{loadSettings();},[]);useEffect(()=>{return()=>{if(previewUrl){URL.revokeObjectURL(previewUrl);}};},[previewUrl]);const loadSettings=async()=>{setLoading(true);try{const response=await fetch(`${API_BASE}/api/gifts/settings`);const data=await response.json();setItems(data.items||[]);setTableCount(data.tableCount||10);}catch(error){console.error(\"Load gift settings failed\",error);setMessage(\"ไม่สามารถโหลดข้อมูลสินค้าได้\");}finally{setLoading(false);}};const handleInputChange=(field,value)=>{setForm(prev=>({...prev,[field]:value}));};const handleAddItem=async e=>{e.preventDefault();if(!form.name||!form.price){setMessage(\"กรุณากรอกชื่อและราคา\");return;}setSaving(true);setMessage(\"\");try{let imageUrlToSave=\"\";if(localImage){const uploadForm=new FormData();uploadForm.append(\"image\",localImage);const uploadResponse=await fetch(`${API_BASE}/api/gifts/upload`,{method:\"POST\",body:uploadForm});const uploadData=await uploadResponse.json();if(!uploadResponse.ok||!uploadData.success){throw new Error(uploadData.message||\"อัปโหลดรูปภาพไม่สำเร็จ\");}imageUrlToSave=uploadData.url||\"\";}const response=await fetch(`${API_BASE}/api/gifts/items`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:form.name,price:Number(form.price),description:form.description,imageUrl:imageUrlToSave||\"\"})});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"เพิ่มสินค้าล้มเหลว\");}setItems(data.settings.items||[]);setForm({name:\"\",price:\"\",description:\"\"});setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");if(fileInputRef.current){fileInputRef.current.value=\"\";}setMessage(\"เพิ่มสินค้าสำเร็จ\");}catch(error){console.error(\"Add gift item failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}finally{setSaving(false);}};const handleDelete=async id=>{if(!window.confirm(\"ต้องการลบสินค้ารายการนี้หรือไม่?\"))return;try{const response=await fetch(`${API_BASE}/api/gifts/items/${id}`,{method:\"DELETE\"});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"ลบไม่สำเร็จ\");}setItems(data.settings.items||[]);}catch(error){console.error(\"Delete gift item failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}};const handleTableUpdate=async()=>{if(!tableCount||Number(tableCount)<1){setMessage(\"จำนวนโต๊ะต้องมากกว่า 0\");return;}try{const response=await fetch(`${API_BASE}/api/gifts/table-count`,{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tableCount:Number(tableCount)})});const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"บันทึกไม่สำเร็จ\");}setItems(data.settings.items||[]);setTableCount(data.settings.tableCount||tableCount);setMessage(\"อัปเดตจำนวนโต๊ะเรียบร้อย\");}catch(error){console.error(\"Update table count failed\",error);setMessage(error.message||\"เกิดข้อผิดพลาด\");}};const handleFileChange=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(!file){setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");if(fileInputRef.current){fileInputRef.current.value=\"\";}return;}if(previewUrl){URL.revokeObjectURL(previewUrl);}setLocalImage(file);setPreviewUrl(URL.createObjectURL(file));};const clearLocalImage=()=>{setLocalImage(null);if(previewUrl){URL.revokeObjectURL(previewUrl);}setPreviewUrl(\"\");if(fileInputRef.current){fileInputRef.current.value=\"\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"giftsetting-shell\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"giftsetting-hero\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"eyebrow\",children:\"CMS ADMIN\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E15\\u0E31\\u0E49\\u0E07\\u0E04\\u0E48\\u0E32\\u0E2A\\u0E48\\u0E07\\u0E02\\u0E2D\\u0E07\\u0E02\\u0E27\\u0E31\\u0E0D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E41\\u0E25\\u0E30\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E1E\\u0E23\\u0E49\\u0E2D\\u0E21\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"ghost-link\",children:\"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ghost-button\",onClick:loadSettings,children:\"\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"giftsetting-layout\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E17\\u0E35\\u0E48\\u0E23\\u0E2D\\u0E07\\u0E23\\u0E31\\u0E1A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E40\\u0E25\\u0E02\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E2A\\u0E39\\u0E07\\u0E2A\\u0E38\\u0E14\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E02\\u0E2D\\u0E07\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-button\",onClick:handleTableUpdate,children:\"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-config\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:tableCount,onChange:e=>setTableCount(e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"helper-text\",children:[\"\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19 \",tableCount,\" \\u0E42\\u0E15\\u0E4A\\u0E30\"]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E07\\u0E02\\u0E2D\\u0E07\\u0E02\\u0E27\\u0E31\\u0E0D\"})]}),saving&&/*#__PURE__*/_jsx(\"span\",{className:\"chip\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"gift-form\",onSubmit:handleAddItem,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>handleInputChange(\"name\",e.target.value),placeholder:\"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E0A\\u0E48\\u0E2D\\u0E14\\u0E2D\\u0E01\\u0E44\\u0E21\\u0E49\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E1A\\u0E32\\u0E17)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:form.price,onChange:e=>handleInputChange(\"price\",e.target.value),placeholder:\"\\u0E40\\u0E0A\\u0E48\\u0E19 150\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field file-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E23\\u0E39\\u0E1B\\u0E08\\u0E32\\u0E01\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,ref:fileInputRef}),/*#__PURE__*/_jsx(\"small\",{className:\"helper-text\",children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E39\\u0E1B\\u0E08\\u0E32\\u0E01\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E19\\u0E36\\u0E48\\u0E07\\u0E23\\u0E39\\u0E1B \\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E30\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E43\\u0E2B\\u0E49\\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"})]})]}),previewUrl&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"\\u0E15\\u0E31\\u0E27\\u0E2D\\u0E22\\u0E48\\u0E32\\u0E07\\u0E23\\u0E39\\u0E1B\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"ghost-button\",onClick:clearLocalImage,children:\"\\u0E25\\u0E49\\u0E32\\u0E07\\u0E23\\u0E39\\u0E1B\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"3\",value:form.description,onChange:e=>handleInputChange(\"description\",e.target.value),placeholder:\"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"primary-button\",disabled:saving,children:saving?\"กำลังบันทึก...\":\"เพิ่มสินค้า\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"giftsetting-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-head\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 (\",items.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E2B\\u0E49\\u0E1E\\u0E23\\u0E49\\u0E2D\\u0E21\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E01\\u0E31\\u0E1A\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"panel-empty\",children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"}):items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"panel-empty\",children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}):/*#__PURE__*/_jsx(\"div\",{className:\"gift-items-table\",children:items.map(item=>{var _item$name,_item$name$charAt;return/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row-main\",children:[item.imageUrl?/*#__PURE__*/_jsx(\"img\",{src:resolveImageSrc(item.imageUrl),alt:item.name,className:\"gift-thumb\"}):/*#__PURE__*/_jsx(\"div\",{className:\"gift-thumb placeholder\",children:((_item$name=item.name)===null||_item$name===void 0?void 0:(_item$name$charAt=_item$name.charAt(0))===null||_item$name$charAt===void 0?void 0:_item$name$charAt.toUpperCase())||\"?\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),item.description&&/*#__PURE__*/_jsx(\"p\",{children:item.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gift-row-actions\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"\\u0E3F\",item.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"ghost-button\",onClick:()=>handleDelete(item.id),children:\"\\u0E25\\u0E1A\"})]})]},item.id);})})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"giftsetting-alert\",children:message})]})]});}export default Giftsetting;","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","jsx","_jsx","jsxs","_jsxs","resolveApiBase","_process$env$REACT_AP","_window$location","fromEnv","process","env","REACT_APP_ADMIN_API","replace","window","location","origin","includes","API_BASE","Giftsetting","items","setItems","tableCount","setTableCount","loading","setLoading","saving","setSaving","message","setMessage","form","setForm","name","price","description","localImage","setLocalImage","previewUrl","setPreviewUrl","fileInputRef","resolveImageSrc","url","startsWith","loadSettings","URL","revokeObjectURL","response","fetch","data","json","error","console","handleInputChange","field","value","prev","handleAddItem","e","preventDefault","imageUrlToSave","uploadForm","FormData","append","uploadResponse","method","body","uploadData","ok","success","Error","headers","JSON","stringify","Number","imageUrl","settings","current","handleDelete","id","confirm","handleTableUpdate","handleFileChange","event","_event$target$files","file","target","files","createObjectURL","clearLocalImage","className","children","to","onClick","type","min","onChange","onSubmit","placeholder","accept","ref","src","alt","rows","disabled","length","map","item","_item$name","_item$name$charAt","charAt","toUpperCase"],"sources":["C:/Users/CRcra/Downloads/Test/Admin--/frontend/src/Giftsetting.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Giftsetting.css\";\r\n\r\nconst resolveApiBase = () => {\r\n\tconst fromEnv = process.env.REACT_APP_ADMIN_API?.replace(/\\/$/, \"\");\r\n\tif (fromEnv) return fromEnv;\r\n\tif (typeof window !== \"undefined\" && window.location?.origin) {\r\n\t\tconst { origin } = window.location;\r\n\t\tif (origin.includes(\"localhost\")) {\r\n\t\t\treturn \"http://localhost:5001\";\r\n\t\t}\r\n\t\treturn origin.replace(/\\/$/, \"\");\r\n\t}\r\n\treturn \"http://localhost:5001\";\r\n};\r\n\r\nconst API_BASE = resolveApiBase();\r\n\r\nfunction Giftsetting() {\r\n\tconst [items, setItems] = useState([]);\r\n\tconst [tableCount, setTableCount] = useState(10);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [saving, setSaving] = useState(false);\r\n\tconst [message, setMessage] = useState(\"\");\r\n\tconst [form, setForm] = useState({ name: \"\", price: \"\", description: \"\" });\r\n\tconst [localImage, setLocalImage] = useState(null);\r\n\tconst [previewUrl, setPreviewUrl] = useState(\"\");\r\n\tconst fileInputRef = useRef(null);\r\n\r\n\tconst resolveImageSrc = (url) => {\r\n\t\tif (!url) return \"\";\r\n\t\treturn url.startsWith(\"http\") ? url : `${API_BASE}${url}`;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tloadSettings();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t};\r\n\t}, [previewUrl]);\r\n\r\n\tconst loadSettings = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/settings`);\r\n\t\t\tconst data = await response.json();\r\n\t\t\tsetItems(data.items || []);\r\n\t\t\tsetTableCount(data.tableCount || 10);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Load gift settings failed\", error);\r\n\t\t\tsetMessage(\"ไม่สามารถโหลดข้อมูลสินค้าได้\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleInputChange = (field, value) => {\r\n\t\tsetForm((prev) => ({ ...prev, [field]: value }));\r\n\t};\r\n\r\n\tconst handleAddItem = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!form.name || !form.price) {\r\n\t\t\tsetMessage(\"กรุณากรอกชื่อและราคา\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSaving(true);\r\n\t\tsetMessage(\"\");\r\n\t\ttry {\r\n\t\t\tlet imageUrlToSave = \"\";\r\n\t\t\tif (localImage) {\r\n\t\t\t\tconst uploadForm = new FormData();\r\n\t\t\t\tuploadForm.append(\"image\", localImage);\r\n\t\t\t\tconst uploadResponse = await fetch(`${API_BASE}/api/gifts/upload`, {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tbody: uploadForm,\r\n\t\t\t\t});\r\n\t\t\t\tconst uploadData = await uploadResponse.json();\r\n\t\t\t\tif (!uploadResponse.ok || !uploadData.success) {\r\n\t\t\t\t\tthrow new Error(uploadData.message || \"อัปโหลดรูปภาพไม่สำเร็จ\");\r\n\t\t\t\t}\r\n\t\t\t\timageUrlToSave = uploadData.url || \"\";\r\n\t\t\t}\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/items`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tname: form.name,\r\n\t\t\t\t\tprice: Number(form.price),\r\n\t\t\t\t\tdescription: form.description,\r\n\t\t\t\t\timageUrl: imageUrlToSave || \"\",\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"เพิ่มสินค้าล้มเหลว\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t\tsetForm({ name: \"\", price: \"\", description: \"\" });\r\n\t\t\tsetLocalImage(null);\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t\tsetPreviewUrl(\"\");\r\n\t\t\tif (fileInputRef.current) {\r\n\t\t\t\tfileInputRef.current.value = \"\";\r\n\t\t\t}\r\n\t\t\tsetMessage(\"เพิ่มสินค้าสำเร็จ\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Add gift item failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t} finally {\r\n\t\t\tsetSaving(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDelete = async (id) => {\r\n\t\tif (!window.confirm(\"ต้องการลบสินค้ารายการนี้หรือไม่?\")) return;\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/items/${id}`, {\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"ลบไม่สำเร็จ\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Delete gift item failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleTableUpdate = async () => {\r\n\t\tif (!tableCount || Number(tableCount) < 1) {\r\n\t\t\tsetMessage(\"จำนวนโต๊ะต้องมากกว่า 0\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${API_BASE}/api/gifts/table-count`, {\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({ tableCount: Number(tableCount) })\r\n\t\t\t});\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (!response.ok || !data.success) {\r\n\t\t\t\tthrow new Error(data.message || \"บันทึกไม่สำเร็จ\");\r\n\t\t\t}\r\n\t\t\tsetItems(data.settings.items || []);\r\n\t\t\tsetTableCount(data.settings.tableCount || tableCount);\r\n\t\t\tsetMessage(\"อัปเดตจำนวนโต๊ะเรียบร้อย\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Update table count failed\", error);\r\n\t\t\tsetMessage(error.message || \"เกิดข้อผิดพลาด\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleFileChange = (event) => {\r\n\t\tconst file = event.target.files?.[0];\r\n\t\tif (!file) {\r\n\t\t\tsetLocalImage(null);\r\n\t\t\tif (previewUrl) {\r\n\t\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t\t}\r\n\t\t\tsetPreviewUrl(\"\");\r\n\t\t\tif (fileInputRef.current) {\r\n\t\t\t\tfileInputRef.current.value = \"\";\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (previewUrl) {\r\n\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t}\r\n\t\tsetLocalImage(file);\r\n\t\tsetPreviewUrl(URL.createObjectURL(file));\r\n\t};\r\n\r\n\tconst clearLocalImage = () => {\r\n\t\tsetLocalImage(null);\r\n\t\tif (previewUrl) {\r\n\t\t\tURL.revokeObjectURL(previewUrl);\r\n\t\t}\r\n\t\tsetPreviewUrl(\"\");\r\n\t\tif (fileInputRef.current) {\r\n\t\t\tfileInputRef.current.value = \"\";\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"giftsetting-shell\">\r\n\t\t\t<header className=\"giftsetting-hero\">\r\n\t\t\t\t<div className=\"hero-info\">\r\n\t\t\t\t\t<p className=\"eyebrow\">CMS ADMIN</p>\r\n\t\t\t\t\t<h1>ตั้งค่าส่งของขวัญ</h1>\r\n\t\t\t\t\t<p className=\"subtitle\">กำหนดจำนวนโต๊ะและสินค้าที่พร้อมให้ผู้ใช้เลือก</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"hero-actions\">\r\n\t\t\t\t\t<Link to=\"/home\" className=\"ghost-link\">กลับหน้าหลัก</Link>\r\n\t\t\t\t\t<button className=\"ghost-button\" onClick={loadSettings}>\r\n\t\t\t\t\t\tโหลดข้อมูลล่าสุด\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\r\n\t\t\t<main className=\"giftsetting-layout\">\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>จำนวนโต๊ะที่รองรับ</h2>\r\n\t\t\t\t\t\t\t<p>กำหนดเลขโต๊ะสูงสุดสำหรับคำสั่งซื้อของผู้ใช้</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button className=\"primary-button\" onClick={handleTableUpdate}>\r\n\t\t\t\t\t\t\tบันทึก\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"table-config\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\tvalue={tableCount}\r\n\t\t\t\t\t\t\tonChange={(e) => setTableCount(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span className=\"helper-text\">ปัจจุบัน {tableCount} โต๊ะ</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>เพิ่มรายการสินค้า</h2>\r\n\t\t\t\t\t\t\t<p>กรอกข้อมูลสินค้าเพื่อให้ผู้ใช้เลือกส่งของขวัญ</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{saving && <span className=\"chip\">กำลังบันทึก...</span>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form className=\"gift-form\" onSubmit={handleAddItem}>\r\n\t\t\t\t\t\t<div className=\"form-grid\">\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>ชื่อสินค้า</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"name\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"เช่น ช่อดอกไม้\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>ราคา (บาท)</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.price}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"เช่น 150\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-field file-field\">\r\n\t\t\t\t\t\t\t\t<label>อัปโหลดรูปจากเครื่อง</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleFileChange}\r\n\t\t\t\t\t\t\t\t\tref={fileInputRef}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<small className=\"helper-text\">เลือกรูปจากเครื่องได้หนึ่งรูป ระบบจะอัปโหลดให้อัตโนมัติ</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{previewUrl && (\r\n\t\t\t\t\t\t\t<div className=\"image-preview\">\r\n\t\t\t\t\t\t\t\t<img src={previewUrl} alt=\"ตัวอย่างรูป\" />\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"ghost-button\" onClick={clearLocalImage}>\r\n\t\t\t\t\t\t\t\t\tล้างรูป\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<label>รายละเอียด</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\tvalue={form.description}\r\n\t\t\t\t\t\t\tonChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n\t\t\t\t\t\t\tplaceholder=\"คำอธิบายเพิ่มเติม\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"primary-button\" disabled={saving}>\r\n\t\t\t\t\t\t\t{saving ? \"กำลังบันทึก...\" : \"เพิ่มสินค้า\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"giftsetting-panel\">\r\n\t\t\t\t\t<div className=\"panel-head\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2>รายการสินค้าทั้งหมด ({items.length})</h2>\r\n\t\t\t\t\t\t\t<p>จัดการสินค้าให้พร้อมใช้งานกับระบบผู้ใช้</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t<div className=\"panel-empty\">กำลังโหลด...</div>\r\n\t\t\t\t\t) : items.length === 0 ? (\r\n\t\t\t\t\t\t<div className=\"panel-empty\">ยังไม่มีสินค้า</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"gift-items-table\">\r\n\t\t\t\t\t\t\t{items.map((item) => (\r\n\t\t\t\t\t\t\t\t<div key={item.id} className=\"gift-row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"gift-row-main\">\r\n\t\t\t\t\t\t\t\t\t\t{item.imageUrl ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={resolveImageSrc(item.imageUrl)} alt={item.name} className=\"gift-thumb\" />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"gift-thumb placeholder\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.name?.charAt(0)?.toUpperCase() || \"?\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<strong>{item.name}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.description && <p>{item.description}</p>}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"gift-row-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"price\">฿{item.price}</span>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"ghost-button\" onClick={() => handleDelete(item.id)}>\r\n\t\t\t\t\t\t\t\t\t\t\tลบ\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t{message && <div className=\"giftsetting-alert\">{message}</div>}\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Giftsetting;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}